<script>
    window.VrBehaviors = window.VrBehaviors || {};
    VrBehaviors.DeleteBehavior = {

        created: function() {
            this.obj.on('mousedown', this._initializeDeleteButton.bind(this))
        },

        _initializeDeleteButton: function() {
            var width = 6;
            var padding = 10;
            var geometry = new THREE.CylinderGeometry(width, width, 10, 32);
            var material = new THREE.MeshBasicMaterial({color: 0x000000});
            var mesh = new THREE.Mesh(geometry, material);
            mesh.rotateX(90 * (Math.PI/180));
            mesh.position.x = this.width / 2 + padding;
            mesh.position.y = padding;
            this.obj.add(mesh);

            mesh.on('mouseover', this.onMouseOver.bind(this));
            mesh.on('mouseout', this.onMouseOut.bind(this));
            mesh.on('mousedown', this.delete.bind(this));
        },

        onMouseOver: function(event) {
            event.target.material.color.set(0xFF0000);
        },

        onMouseOut: function(event) {
            event.target.material.color.set(0x000000);
        },

        delete: function(event) {
            // delete all connections
            this.fire('vr-delete', {});

            // delete this object
            Polymer.dom(this.parentNode).removeChild(this);
        }

    };
</script>
