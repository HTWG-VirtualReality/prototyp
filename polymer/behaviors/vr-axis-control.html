<script>
    window.VrBehaviors = window.VrBehaviors || {};
    VrBehaviors.AxisControlBehavior = {
        ready: function() {
            var dom = this.renderer.domElement;
            var element = this.group;
            var throttle = _.throttle(onMouseMove, 100);

            var positionX = 0;
            var positionY = 0;
            var mouseX = 0;
            var mouseY = 0;
            var speed = 0.5;

            dom.addEventListener('mousedown', function (event) {
                event.preventDefault();

                dom.addEventListener('mousemove', throttle);
                dom.addEventListener('mouseup', resetMouse);
                dom.addEventListener('mouseout', resetMouse);

                positionX = element.position.x;
                positionY = element.position.y;
                mouseX = event.clientX;
                mouseY = event.clientY;
            });

            dom.addEventListener('touchstart', function (event) {
                event.preventDefault();

                dom.addEventListener('touchend', resetTouch);

                positionX = element.position.x;
                positionY = element.position.y;
                mouseX = event.clientX;
                mouseY = event.clientY;
            });


            function onMouseMove(event) {
                var moveX = event.clientX - mouseX;
                var moveY = mouseY - event.clientY;

                element.position.x = positionX + moveX * speed;
                element.position.y = positionY + moveY * speed;
            }

            function resetMouse() {
                dom.removeEventListener('mousemove', throttle);
                dom.removeEventListener('mouseup', resetMouse);
                dom.removeEventListener('mouseout', resetMouse);
            }

            function resetTouch() {
                dom.removeEventListener('touchend', resetTouch);
            }
        }
    };
</script>