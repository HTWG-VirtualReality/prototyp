<link rel="import" href="../bower_components/polymer/polymer.html">

<dom-module id="vr-class">
    <template>
        <template is="dom-repeat" items="{{boxItems}}">
            <vr-box x-pos="{{item.x}}" y-pos="{{item.y}}" width="{{item.width}}"
                    height="{{item.height}}" depth="{{item.depth}}"
                    text="{{item.text}}"></vr-box>
        </template>
    </template>
</dom-module>

<script>
    Polymer({
        is: "vr-class",

        properties: {
            xPos: {
                type: Number,
                value: 0
            },
            yPos: {
                type: Number,
                value: 0
            },
            width: {
                type: Number,
                value: 50
            },
            height: {
                type: Number,
                value: 50
            },
            depth: {
                type: Number,
                value: 10
            },
            text1: {
                type: String,
                value: ''
            },
            text2: {
                type: String,
                value: ''
            },
            text3: {
                type: String,
                value: ''
            }
        },

        ready: function () {
            this.obj = new THREE.Group();
            this.obj.position.setX(this.xPos);
            this.obj.position.setY(this.yPos);

            this.boxItems = [
                {
                    x: 0,
                    y: 0,
                    width: this.width,
                    height: this.height / 3,
                    depth: this.depth,
                    text: this.text1
                },
                {
                    x: 0,
                    y: -this.height / 3,
                    width: this.width,
                    height: this.height / 3,
                    depth: this.depth,
                    text: this.text2
                },
                {
                    x: 0,
                    y: -this.height / 3 * 2,
                    width: this.width,
                    height: this.height / 3,
                    depth: this.depth,
                    text: this.text3
                }
            ];
        },

        attached: function () {
            this._getChildren().forEach(function (box) {
                this.obj.add(box.obj);
            }.bind(this));
        },

        _getChildren: function () {
            // return all children except template element
            return Polymer.dom(this.root).children.filter(function (node) {
                return node.localName != 'template';
            });
        },

        // simple on click
        onClick: function () {
            this._getChildren().forEach(function (box) {
                box.onClick();
            }.bind(this));
        }

    });
</script>
